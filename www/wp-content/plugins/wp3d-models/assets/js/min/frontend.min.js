/*! wp3d-models 2020-07-14 */

function promptJSShow(e,t,n,r){prompt(e,'<div id="wp3d-'+t+'"><a href="'+n+'">LOADING - '+r+'</a><script src="//s3-us-west-2.amazonaws.com/wp3dmodels/js/embed-iframe.js?id=wp3d-'+t+'"><\/script></div>')}function promptIFShow(e,t){prompt(e,'<iframe width="853" height="480" src="'+t+'" frameborder="0" allow="vr" allowfullscreen="allowfullscreen"></iframe>')}function preload(e){jQuery(e).each(function(){(new Image).src=this})}function detectIOS(){var e=window.navigator.userAgent;return/iPad|iPhone|iPod/.test(e)}function updateViewportDimensions(){var e=window,t=document,n=t.documentElement,r=t.getElementsByTagName("body")[0];return{width:e.innerWidth||n.clientWidth||r.clientWidth,height:e.innerHeight||n.clientHeight||r.clientHeight}}!function(t){var e=t(document),n=!1,r={x:null,y:null},i=Math.abs,a={"mousedown.mclick":function(e){r.x=e.pageX,r.y=e.pageY,n=!1},"mouseup.mclick":function(e){n=i(r.x-e.pageX)>t.clickMouseMoved.threshold||i(r.y-e.pageY)>t.clickMouseMoved.threshold}};e.on(a),t.clickMouseMoved=function(){return n},t.clickMouseMoved.threshold=3}(jQuery),function(d){"use strict";if(void 0!==d){var r=[],i=function(t){return r=d.grep(r,function(e){return e!==t&&0<e.$instance.closest("body").length})},a={allowfullscreen:1,frameborder:1,height:1,longdesc:1,marginheight:1,marginwidth:1,name:1,referrerpolicy:1,scrolling:1,sandbox:1,src:1,srcdoc:1,width:1},n={keyup:"onKeyUp",resize:"onResize"},o=function(e){d.each(l.opened().reverse(),function(){if(!e.isDefaultPrevented()&&!1===this[n[e.type]](e))return e.preventDefault(),e.stopPropagation(),!1})},s=function(e){if(e!==l._globalHandlerInstalled){l._globalHandlerInstalled=e;var t=d.map(n,function(e,t){return t+"."+l.prototype.namespace}).join(" ");d(window)[e?"on":"off"](t,o)}};l.prototype={constructor:l,namespace:"featherlight",targetAttr:"data-featherlight",variant:null,resetCss:!1,background:null,openTrigger:"click",closeTrigger:"click",filter:null,root:"body",openSpeed:250,closeSpeed:250,closeOnClick:"background",closeOnEsc:!0,closeIcon:"&#10005;",loading:"",persist:!1,otherClose:null,beforeOpen:d.noop,beforeContent:d.noop,beforeClose:d.noop,afterOpen:d.noop,afterContent:d.noop,afterClose:d.noop,onKeyUp:d.noop,onResize:d.noop,type:null,contentFilters:["jquery","image","html","ajax","iframe","text"],setup:function(e,t){"object"!=typeof e||e instanceof d!=!1||t||(t=e,e=void 0);var n=d.extend(this,t,{target:e}),r=n.resetCss?n.namespace+"-reset":n.namespace,i=d(n.background||['<div class="'+r+"-loading "+r+'">','<div class="'+r+'-content">','<button class="'+r+"-close-icon "+n.namespace+'-close" aria-label="Close">',n.closeIcon,"</button>",'<div class="'+n.namespace+'-inner">'+n.loading+"</div>","</div>","</div>"].join("")),a="."+n.namespace+"-close"+(n.otherClose?","+n.otherClose:"");return n.$instance=i.clone().addClass(n.variant),n.$instance.on(n.closeTrigger+"."+n.namespace,function(e){var t=d(e.target);("background"===n.closeOnClick&&t.is("."+n.namespace)||"anywhere"===n.closeOnClick||t.closest(a).length)&&(n.close(e),e.preventDefault())}),this},getContent:function(){if(!1!==this.persist&&this.$content)return this.$content;function e(e){return t.$currentTarget&&t.$currentTarget.attr(e)}var t=this,n=this.constructor.contentFilters,r=e(t.targetAttr),i=t.target||r||"",a=n[t.type];if(!a&&i in n&&(a=n[i],i=t.target&&r),i=i||e("href")||"",!a)for(var o in n)t[o]&&(a=n[o],i=t[o]);if(!a){var s=i;if(i=null,d.each(t.contentFilters,function(){return(a=n[this]).test&&(i=a.test(s)),!i&&a.regex&&s.match&&s.match(a.regex)&&(i=s),!i}),!i)return"console"in window&&window.console.error("Featherlight: no content filter found "+(s?' for "'+s+'"':" (no target specified)")),!1}return a.process.call(t,i)},setContent:function(e){var t=this;return e.is("iframe")&&t.$instance.addClass(t.namespace+"-iframe"),t.$instance.removeClass(t.namespace+"-loading"),t.$instance.find("."+t.namespace+"-inner").not(e).slice(1).remove().end().replaceWith(d.contains(t.$instance[0],e[0])?"":e),t.$content=e.addClass(t.namespace+"-inner"),t},open:function(t){var n=this;if(n.$instance.hide().appendTo(n.root),!(t&&t.isDefaultPrevented()||!1===n.beforeOpen(t))){t&&t.preventDefault();var e=n.getContent();if(e)return r.push(n),s(!0),n.$instance.fadeIn(n.openSpeed),n.beforeContent(t),d.when(e).always(function(e){n.setContent(e),n.afterContent(t)}).then(n.$instance.promise()).done(function(){n.afterOpen(t)})}return n.$instance.detach(),d.Deferred().reject().promise()},close:function(e){var t=this,n=d.Deferred();return!1===t.beforeClose(e)?n.reject():(0===i(t).length&&s(!1),t.$instance.fadeOut(t.closeSpeed,function(){t.$instance.detach(),t.afterClose(e),n.resolve()})),n.promise()},resize:function(e,t){if(e&&t){this.$content.css("width","").css("height","");var n=Math.max(e/(this.$content.parent().width()-1),t/(this.$content.parent().height()-1));1<n&&(n=t/Math.floor(t/n),this.$content.css("width",e/n+"px").css("height",t/n+"px"))}},chainCallbacks:function(e){for(var t in e)this[t]=d.proxy(e[t],this,d.proxy(this[t],this))}},d.extend(l,{id:0,autoBind:"[data-featherlight]",defaults:l.prototype,contentFilters:{jquery:{regex:/^[#.]\w/,test:function(e){return e instanceof d&&e},process:function(e){return!1!==this.persist?d(e):d(e).clone(!0)}},image:{regex:/\.(png|jpg|jpeg|gif|tiff|bmp|svg)(\?\S*)?$/i,process:function(e){var t=d.Deferred(),n=new Image,r=d('<img src="'+e+'" alt="" class="'+this.namespace+'-image" />');return n.onload=function(){r.naturalWidth=n.width,r.naturalHeight=n.height,t.resolve(r)},n.onerror=function(){t.reject(r)},n.src=e,t.promise()}},html:{regex:/^\s*<[\w!][^<]*>/,process:function(e){return d(e)}},ajax:{regex:/./,process:function(e){var n=d.Deferred(),r=d("<div></div>").load(e,function(e,t){"error"!==t&&n.resolve(r.contents()),n.fail()});return n.promise()}},iframe:{process:function(e){var t=new d.Deferred,n=d("<iframe/>"),r=function(e,t){var n={},r=new RegExp("^"+t+"([A-Z])(.*)");for(var i in e){var a=i.match(r);if(a)n[(a[1]+a[2].replace(/([A-Z])/g,"-$1")).toLowerCase()]=e[i]}return n}(this,"iframe"),i=function(e,t){var n={};for(var r in e)r in t&&(n[r]=e[r],delete e[r]);return n}(r,a);return n.hide().attr("src",e).attr(i).css(r).on("load",function(){t.resolve(n.show())}).appendTo(this.$instance.find("."+this.namespace+"-content")),t.promise()}},text:{process:function(e){return d("<div>",{text:e})}}},functionAttributes:["beforeOpen","afterOpen","beforeContent","afterContent","beforeClose","afterClose"],readElementConfig:function(e,t){var r=this,i=new RegExp("^data-"+t+"-(.*)"),a={};return e&&e.attributes&&d.each(e.attributes,function(){var e=this.name.match(i);if(e){var t=this.value,n=d.camelCase(e[1]);if(0<=d.inArray(n,r.functionAttributes))t=new Function(t);else try{t=JSON.parse(t)}catch(e){}a[n]=t}}),a},extend:function(e,t){function n(){this.constructor=e}return n.prototype=this.prototype,e.prototype=new n,e.__super__=this.prototype,d.extend(e,this,t),e.defaults=e.prototype,e},attach:function(i,a,o){var s=this;"object"!=typeof a||a instanceof d!=!1||o||(o=a,a=void 0);function e(e){var t=d(e.currentTarget),n=d.extend({$source:i,$currentTarget:t},s.readElementConfig(i[0],c.namespace),s.readElementConfig(e.currentTarget,c.namespace),o),r=l||t.data("featherlight-persisted")||new s(a,n);"shared"===r.persist?l=r:!1!==r.persist&&t.data("featherlight-persisted",r),n.$currentTarget.blur&&n.$currentTarget.blur(),r.open(e)}var l,t=(o=d.extend({},o)).namespace||s.defaults.namespace,c=d.extend({},s.defaults,s.readElementConfig(i[0],t),o);return i.on(c.openTrigger+"."+c.namespace,c.filter,e),e},current:function(){var e=this.opened();return e[e.length-1]||null},opened:function(){var t=this;return i(),d.grep(r,function(e){return e instanceof t})},close:function(e){var t=this.current();if(t)return t.close(e)},_onReady:function(){var t=this;t.autoBind&&(d(t.autoBind).each(function(){t.attach(d(this))}),d(document).on("click",t.autoBind,function(e){e.isDefaultPrevented()||t.attach(d(e.currentTarget))(e)}))},_callbackChain:{onKeyUp:function(e,t){return 27===t.keyCode?(this.closeOnEsc&&d.featherlight.close(t),!1):e(t)},beforeOpen:function(e,t){return this._previouslyActive=document.activeElement,this._$previouslyTabbable=d("a, input, select, textarea, iframe, button, iframe, [contentEditable=true]").not("[tabindex]").not(this.$instance.find("button")),this._$previouslyWithTabIndex=d("[tabindex]").not('[tabindex="-1"]'),this._previousWithTabIndices=this._$previouslyWithTabIndex.map(function(e,t){return d(t).attr("tabindex")}),this._$previouslyWithTabIndex.add(this._$previouslyTabbable).attr("tabindex",-1),document.activeElement.blur&&document.activeElement.blur(),e(t)},afterClose:function(e,t){var n=e(t),r=this;return this._$previouslyTabbable.removeAttr("tabindex"),this._$previouslyWithTabIndex.each(function(e,t){d(t).attr("tabindex",r._previousWithTabIndices[e])}),this._previouslyActive.focus(),n},onResize:function(e,t){return this.resize(this.$content.naturalWidth,this.$content.naturalHeight),e(t)},afterContent:function(e,t){var n=e(t);return this.$instance.find("[autofocus]:not([disabled])").focus(),this.onResize(t),n}}}),d.featherlight=l,d.fn.featherlight=function(e,t){return l.attach(this,e,t),this},d(document).ready(function(){l._onReady()})}else"console"in window&&window.console.info("Too much lightness, Featherlight needs jQuery.");function l(e,t){if(!(this instanceof l)){var n=new l(e,t);return n.open(),n}this.id=l.id++,this.setup(e,t),this.chainCallbacks(l._callbackChain)}}(jQuery);var viewport=updateViewportDimensions(),waitForFinalEvent=function(){var r={};return function(e,t,n){r[n=n||"Don't call this twice without a uniqueId"]&&clearTimeout(r[n]),r[n]=setTimeout(e,t)}}(),timeToWaitForLast=100;jQuery(window).resize(function(){waitForFinalEvent(function(){viewport=updateViewportDimensions()},timeToWaitForLast,"general-resize")}),jQuery(document).ready(function(e){detectIOS()&&jQuery("body").addClass("is-ios"),jQuery("ul.wp3d-prop-tabs li a").click(function(e){e.preventDefault();var t=jQuery(this).attr("href");jQuery("ul.wp3d-prop-tabs li").removeClass("active"),jQuery(".wp3d-tab-content div").removeClass("active"),jQuery(this).parent("li").addClass("active"),jQuery(t).addClass("active")}),jQuery("span.wp3d-caption-open").click(function(){jQuery(this).hide(),jQuery(this).siblings("div.wp3d-gallery-caption").addClass("enabled")}),jQuery("span.wp3d-caption-close").click(function(){jQuery(this).parent().removeClass("enabled"),jQuery(this).parent().siblings("span.wp3d-caption-open").show()}),jQuery("#wp3d-zoom-gallery a").featherlight({targetAttr:"href",type:"image",beforeOpen:function(e){if(jQuery.clickMouseMoved())return!1}}),jQuery("#wp3d-floorplan-images a").on("click",function(e){e.preventDefault();var t=jQuery(this).data("featherlight"),n=jQuery(t+" img").data("src");jQuery(t+" img").attr("src",n)}),jQuery("#filter-3d-models a").click(function(e){e.preventDefault();var t=jQuery(this).attr("data-filter");return jQuery("#filter-3d-models .active").removeClass("active"),jQuery(this).addClass("active"),"all-models"==t?jQuery("#wp3d-models div.model-list-wrap").fadeIn("slow").removeClass("inactive").addClass("active"):jQuery("#wp3d-models div.model-list-wrap").each(function(){jQuery(this).hasClass(t)?(jQuery(this).addClass("active").removeClass("inactive"),jQuery(this).fadeIn("slow")):(jQuery(this).removeClass("active").addClass("inactive"),jQuery(this).fadeOut("normal"))}),!1});var r=jQuery("#mp-iframe").data("preload");if(!0===r){if(console.log("preload"),768<=viewport.width){var t=jQuery("#mp-iframe").data("src");""!==t&&jQuery("#mp-iframe").attr("src",t)}}else r=!1;if(jQuery(".wp3d-embed-wrap #wp3d-intro a").click(function(e){e.preventDefault();var t=jQuery("#mp-iframe").data("src"),n=jQuery(".wp3d-embed-wrap .iframe-logo-overlay").clone();viewport.width<768||detectIOS()?(jQuery("html").addClass("wp3d-fullscreen"),jQuery('<div id="wp3d-fullscreen-wrap"><iframe src="'+t+'" frameborder="0" allow="vr" allowfullscreen></div>').appendTo("body"),jQuery('<div id="wp3d-fullscreen-header"><a href="#" id="tour-close" title="CLOSE TOUR"><span class="fa-stack"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-times fa-stack-1x fa-inverse"></i></span></a></div>').appendTo("body"),n.appendTo("#wp3d-fullscreen-wrap"),viewport.width<481&&jQuery(".iframe-logo-overlay").delay(3e3).fadeOut(),jQuery(".wp3d-embed-wrap").hasClass("wp3d-sold")?(markedSold=!0,jQuery(".wp3d-embed-wrap").removeClass("wp3d-sold")):jQuery(".wp3d-embed-wrap").hasClass("wp3d-pending")?(markedPending=!0,jQuery(".wp3d-embed-wrap").removeClass("wp3d-pending")):(markedSold=!1,markedPending=!1),jQuery("#wp3d-fullscreen-header a#tour-close").click(function(e){e.preventDefault(),jQuery("#wp3d-fullscreen-wrap").hide("fast"),jQuery("#wp3d-fullscreen-header").hide("fast"),jQuery("#wp3d-fullscreen-header, #wp3d-fullscreen-wrap").remove(),jQuery("html").removeClass("wp3d-fullscreen"),markedSold?jQuery(".wp3d-embed-wrap").addClass("wp3d-sold"):markedPending&&jQuery(".wp3d-embed-wrap").addClass("wp3d-pending")})):(""!==t&&!1===r&&jQuery("#mp-iframe").attr("src",t),jQuery("#wp3d-intro").fadeOut("slow"),jQuery(".wp3d-embed-wrap").removeClass("wp3d-sold wp3d-pending"))}),jQuery.fn.swiper&&jQuery(".wp3d-swiper-container").length)new Swiper(".wp3d-swiper-container",{pagination:".swiper-pagination",paginationClickable:".swiper-pagination",nextButton:".swiper-button-next",prevButton:".swiper-button-prev",keyboardControl:!0,loop:!0,onInit:function(e){jQuery(".swiper-slide-active").each(function(e){var t=jQuery(this).attr("data-src"),n=jQuery(this).siblings(".swiper-slide-prev").attr("data-src");jQuery(this).css("background-image","url("+t+")"),preload([n])})},onSlideNextStart:function(e){jQuery(".swiper-slide-active").each(function(e){var t=jQuery(this).attr("data-src"),n=jQuery(this).siblings(".swiper-slide-next").attr("data-src");jQuery(this).css("background-image","url("+t+")"),preload([n])})},onSlidePrevStart:function(e){jQuery(".swiper-slide-active").each(function(e){var t=jQuery(this).attr("data-src");if(0===jQuery(this).index())var n=jQuery(this).siblings(".swiper-slide:nth-last-child(3)").attr("data-src");else n=jQuery(this).siblings(".swiper-slide-prev").attr("data-src");jQuery(this).css("background-image","url("+t+")"),preload([n])})}});if(jQuery.fn.slick){var i=jQuery(".slick-slide.cloned-slide");jQuery(".wp3d-zoom-slider").on("init",function(e,t){jQuery(".slick-track .slick-slide").last().clone().appendTo(".slick-track").addClass("cloned-slide last-slide"),jQuery(".slick-track .slick-slide").first().clone().appendTo(".slick-track").removeClass("slick-current slick-center").addClass("cloned-slide first-slide"),jQuery(".slick-slide.cloned-slide img[data-lazy]").each(function(){var e=jQuery(this),t=jQuery(this).attr("data-lazy"),n=document.createElement("img");n.onload=function(){e.animate({opacity:0},100,function(){e.attr("src",t).animate({opacity:1},200,function(){e.removeAttr("data-lazy").removeClass("slick-loading")}),i.trigger("lazyLoaded",[i,e,t])})},n.onerror=function(){e.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),i.trigger("lazyLoadError",[i,e,t])},n.src=t})}).on("init reInit afterChange",function(e,t,n,r){var i=(n||0)+1;jQuery(".slick-current .slick-counter").text(i+"/"+t.slideCount)}).on("lazyLoaded",function(e,t,n,r){setTimeout(function(){jQuery("#wp3d-zoom-gallery").removeClass("gallery-loading")},300)}).slick({lazyLoad:"ondemand",dots:!0,infinite:!1,speed:300,slidesToShow:1,slidesToScroll:1,swipeToSlide:!0,centerMode:!0,variableWidth:!0}),jQuery(window).load(function(){jQuery("body").addClass("loaded"),jQuery("body").delay(800).addClass("loaded-delay")}),jQuery(".wp3d-related-slider").slick({dots:!0,infinite:!1,speed:300,slidesToShow:5,slidesToScroll:5,responsive:[{breakpoint:1024,settings:{slidesToShow:4,slidesToScroll:4,infinite:!0,dots:!0}},{breakpoint:600,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:480,settings:{slidesToShow:2,slidesToScroll:2}}]})}window.setTimeout(function(){jQuery("#wp3d-intro").removeClass("is-loading")},500),jQuery(window).load(function(){jQuery("#wp3d-intro .wp3d-start > img").delay(800).addClass("loaded"),!window.location.hash||"start"==window.location.hash.substring(1)&&(console.log("WP3D Starting!"),jQuery(".wp3d-embed-wrap #wp3d-intro a").click())})});